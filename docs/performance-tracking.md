### Iteration #10 – Inline newline handling
- **Goal:** Reduce the work done per list-item `-` by keeping newline scanning in the parsing loop instead of delegating to `matchNewline` + `expectIndent`, which were called for every object value and repeated the same `(peek -> advance)` sequence.
- **Profiling evidence:** `SWIFTTOON_PERF_TRACE=1 swift run TOONBenchmarks --format json --output Benchmarks/results/latest.json` now reports `Parser.parse` ≈0.00407 s, `Parser.parseListArray` ≈0.00406 s (down from ~0.00434 s), parser throughput ≈2.10 MB/s, and decode throughput ≈2.07 MB/s; the tracker summary and dataset samples live in `perf-artifacts/perf-history.json`.
- **Optimization steps:** Replace the `if matchNewline() { … expectIndent() … }` block in `parseListArrayItem` with an inline newline loop that sets a flag, consumes all newline tokens, and then advances directly over a following `.indent` token before calling `parseObject`. We still return `.object(JSONObject())` when the list entry has no nested block so lenient cases behave the same.
- **Validation & artifacts:** `swift test --filter ParserTests` (passes), `swift run TOONBenchmarks --format json --output Benchmarks/results/latest.json` (with `SWIFTTOON_PERF_TRACE=1`), `swift Scripts/compare-benchmarks.swift Benchmarks/results/latest.json Benchmarks/baseline_reference.json --tolerance 0.05` (still fails because the Swift parser remains behind the TypeScript baseline: `parser_micro` 2.097 MB/s vs baseline 2.940 and `decode_end_to_end` 2.071 MB/s vs 3.796), and `swift Scripts/update-perf-artifacts.swift --latest Benchmarks/results/latest.json --output-dir perf-artifacts --commit "$(git rev-parse HEAD)" --repo joelklabo/SwiftTOON --branch main --history-input perf-artifacts/perf-history.json`. Commit + push the refreshed `perf-artifacts/*` so the README badge/graph can pick up the new throughput.

### Iteration #9 – Peek caching
- **Goal:** Reduce repeated `peekToken(offset: 1)` calls inside `parseListArrayItem` by caching the “upcoming” token once per iteration, trimming a few operations per list entry.
- **Profiling evidence:** `SWIFTTOON_PERF_TRACE=1 swift run TOONBenchmarks --format json --output Benchmarks/results/latest.json` still shows `Parser.parseListArray` dominating (~4.7 ms), so minimizing `peekToken` invocations can shave time off each iteration.
- **Optimization steps:** Captured `let upcoming = peekToken(offset: 1)` immediately after retrieving `next`, and reused `upcoming` for both the colon (`:`) and left-bracket (`[`) checks in `parseListArrayItem`.
- **Validation & artifacts:** After the tweak we reran `swift run TOONBenchmarks …`, `swift Scripts/compare-benchmarks … --tolerance 0.05`, `swift Scripts/update-perf-artifacts …`, and `SWIFTTOON_PERF_TRACE=1 …` so the iteration log and badge reflect the micro-optimization.
